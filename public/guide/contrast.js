webpackJsonp([0,14],{300:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function a(e,t,n,o,r){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,i,l,p,u,c,d=n(11),h=o(d),f=n(17),y=o(f),v=n(14),b=o(v),m=n(13),g=o(m),j=n(62),w=n(463),T=o(w),_=(s=(0,j.bindView)(T.default),s((l=function(e){function t(){var e,n,o,a;(0,h.default)(this,t);for(var s=arguments.length,i=Array(s),l=0;l<s;l++)i[l]=arguments[l];return n=o=(0,b.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r(o,"id",p,o),r(o,"title",u,o),r(o,"finished",c,o),a=n,(0,b.default)(o,a)}return(0,g.default)(t,e),(0,y.default)(t,[{key:"toggle",value:function(){this.finished=!this.finished}}]),t}(j.Root),p=a(l.prototype,"id",[j.observable],{enumerable:!0,initializer:function(){return Math.random()}}),u=a(l.prototype,"title",[j.observable],{enumerable:!0,initializer:function(){return""}}),c=a(l.prototype,"finished",[j.observable],{enumerable:!0,initializer:function(){return!1}}),a(l.prototype,"toggle",[j.action],Object.getOwnPropertyDescriptor(l.prototype,"toggle"),l.prototype),i=l))||i);t.default=_,e.exports=t.default},460:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.Todo=void 0;var r=n(117),a=n(5),s=o(a);t.Todo=(0,r.observer)(function(e){var t=e.todo;return s.createElement("li",null,s.createElement("input",{type:"checkbox",checked:t.finished,onClick:t.toggle}),t.title)})},461:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function s(e,t,n,o,r){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.TodoList=void 0;var i,l,p,u=n(11),c=r(u),d=n(17),h=r(d),f=n(14),y=r(f),v=n(13),b=r(v),m=n(35),g=n(117),j=n(5),w=o(j),T=n(460);t.TodoList=(0,g.observer)((l=function(e){function t(){var e,n,o,r;(0,c.default)(this,t);for(var s=arguments.length,i=Array(s),l=0;l<s;l++)i[l]=arguments[l];return n=o=(0,y.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a(o,"newTodoTitle",p,o),o.handleChange=function(e){o.newTodoTitle=e.target.value},o.handleNewTodoClick=function(e){e.stopPropagation(),o.props.todoStore.addTodo(o.newTodoTitle),o.newTodoTitle=""},r=n,(0,y.default)(o,r)}return(0,b.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e=this.props.todoStore;return w.createElement("div",null,w.createElement("input",{value:this.newTodoTitle,onChange:this.handleChange}),w.createElement("button",{onClick:this.handleNewTodoClick},"Add"),w.createElement("ul",null,e.todos.map(function(e){return w.createElement(T.Todo,{todo:e,key:e.id})})),"Tasks left: ",e.unfinishedTodoCount)}}]),t}(w.Component),p=s(l.prototype,"newTodoTitle",[m.observable],{enumerable:!0,initializer:function(){return""}}),i=l))||i},462:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TodoStore=t.Todo=void 0;var o=n(1188),r=t.Todo=o.types.model("Todo",{id:o.types.optional(o.types.number,function(){return Math.random()}),title:o.types.string,finished:!1}).actions(function(e){return{toggle:function(){e.finished=!e.finished}}});t.TodoStore=o.types.model("TodoStore",{todos:o.types.array(r)}).views(function(e){return{get unfinishedTodoCount(){return e.todos.filter(function(e){return!e.finished}).length}}}).actions(function(e){return{addTodo:function(t){e.todos.push({title:t})}}})},463:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var r=n(62),a=n(5),s=o(a);t.default=(0,r.stateless)(function(e){return s.createElement("li",null,s.createElement("input",{type:"checkbox",checked:e.finished,onClick:e.toggle.bind(e)}),e.title)}),e.exports=t.default},464:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,s=n(11),i=r(s),l=n(17),p=r(l),u=n(14),c=r(u),d=n(13),h=r(d),f=n(62),y=n(5),v=o(y),b=(0,f.binding)(a=function(e){function t(){var e,n,o,r;(0,i.default)(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return n=o=(0,c.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),o.handleNewTodoClick=function(e){e.stopPropagation(),o.local.addTodo(o.newTodoTitle),o.local.newTodoTitle=""},r=n,(0,c.default)(o,r)}return(0,h.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.local;return v.createElement("div",null,v.createElement("input",{"data-bind":"newTodoTitle"}),v.createElement("button",{onClick:this.handleNewTodoClick},"Add"),v.createElement("ul",null,e.todos.map(function(e){return(0,f.h)(e,{key:e.id})})),"Tasks left: ",e.unfinishedTodoCount)}}]),t}(v.Component))||a;t.default=b,e.exports=t.default},465:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function a(e,t,n,o,r){var a={};return Object.keys(o).forEach(function(e){a[e]=o[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,i,l,p,u,c=n(11),d=o(c),h=n(17),f=o(h),y=n(14),v=o(y),b=n(13),m=o(b),g=n(62),j=n(464),w=o(j),T=n(300),_=o(T),x=(s=(0,g.bindView)(w.default),s((l=function(e){function t(){var e,n,o,a;(0,d.default)(this,t);for(var s=arguments.length,i=Array(s),l=0;l<s;l++)i[l]=arguments[l];return n=o=(0,v.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r(o,"todos",p,o),r(o,"newTodoTitle",u,o),a=n,(0,v.default)(o,a)}return(0,m.default)(t,e),(0,f.default)(t,[{key:"addTodo",value:function(){this.todos.push(_.default.create({title:this.newTodoTitle}))}},{key:"unfinishedTodoCount",get:function(){return this.todos.filter(function(e){return!e.finished}).length}}]),t}(g.Root),p=a(l.prototype,"todos",[g.observable],{enumerable:!0,initializer:function(){return[]}}),u=a(l.prototype,"newTodoTitle",[g.observable],{enumerable:!0,initializer:function(){return""}}),a(l.prototype,"unfinishedTodoCount",[g.computed],Object.getOwnPropertyDescriptor(l.prototype,"unfinishedTodoCount"),l.prototype),a(l.prototype,"addTodo",[g.action],Object.getOwnPropertyDescriptor(l.prototype,"addTodo"),l.prototype),i=l))||i);t.default=x,e.exports=t.default},556:function(e,t,n){(function(e){"use strict";function o(e,t){this._id=e,this._clearFn=t}var r=Function.prototype.apply;t.setTimeout=function(){return new o(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(1305),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof e&&e.setImmediate||void 0,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof e&&e.clearImmediate||void 0}).call(t,function(){return this}())},1188:function(e,t,n){(function(e){"use strict";function o(e){return pe(e).type}function r(e,t){return pe(e).getChildType(t)}function a(e,t){return pe(e).onPatch(t)}function s(e,t){return pe(e).onSnapshot(t)}function i(e,t){pe(e).applyPatches(ge(t))}function l(e){function t(){n||(n=a(e,function(e,t){o.rawPatches.push([e,t])}))}var n=null,o={rawPatches:[],get patches(){return this.rawPatches.map(function(e){var t=e[0];return t})},get inversePatches(){return this.rawPatches.map(function(e){var t=(e[0],e[1]);return t})},stop:function(){n&&n(),n=null},resume:t,replay:function(t){i(t||e,o.patches)},undo:function(t){i(t||e,o.inversePatches.slice().reverse())}};return t(),o}function p(e){var t=pe(e);t.isRoot||ye("`protect` can only be invoked on root nodes"),t.isProtectionEnabled=!0}function u(e){var t=pe(e);t.isRoot||ye("`unprotect` can only be invoked on root nodes"),t.isProtectionEnabled=!1}function c(e){return pe(e).isProtected}function d(e,t){return pe(e).applySnapshot(t)}function h(e){return pe(e).snapshot}function f(e,t){void 0===t&&(t=1);for(var n=pe(e).parent;n;){if(0===--t)return!0;n=n.parent}return!1}function y(e,t){void 0===t&&(t=1);for(var n=t,o=pe(e).parent;o;){if(0===--n)return o.storedValue;o=o.parent}return ye("Failed to find the parent of "+pe(e)+" at depth "+t)}function v(e){return pe(e).root.storedValue}function b(e){return pe(e).path}function m(e){return Me(pe(e).path)}function g(e){return pe(e).isRoot}function j(e,t){var n=de(pe(e),t);return n?n.value:void 0}function w(e,t,n){var o=pe(t).root.identifierCache.resolve(e,""+n);return o?o.value:void 0}function T(e,t){var n=de(pe(e),t,!1);if(void 0!==n)return n?n.value:void 0}function _(e,t){return ce(pe(e),pe(t))}function x(e,t){void 0===t&&(t=!0);var n=pe(e);return n.type.create(n.snapshot,t===!0?n.root._environment:t===!1?void 0:t)}function k(e){return pe(e).detach(),e}function A(e){var t=pe(e);t.isRoot?t.die():t.parent.removeChild(t.subpath)}function C(e){return pe(e).isAlive}function P(e,t){pe(e).addDisposer(t)}function V(e){var t=pe(e),n=t.root._environment;return n?n:_t}function O(e,t){var n=pe(e);n.getChildren().forEach(function(e){le(e.storedValue)&&O(e.storedValue,t)}),t(n.storedValue)}function S(e,t){function n(){this.constructor=e}ut(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function N(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]]);return n}function I(e,t,n,o){var r,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(a<3?r(s):a>3?r(t,n,s):r(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s}function E(e){return"object"==typeof e&&e&&e.isType===!0}function D(e){var t=new Map;return function(n,o){switch(n.type){case"action":if(e.filter&&e.filter(n)!==!0)return o(n);var r=e.onStart(n);e.onResume(n,r),t.set(n.id,{call:n,context:r,async:!1});try{var a=o(n);return e.onSuspend(n,r),t.get(n.id).async===!1&&e.onSuccess(n,r,a),a}catch(t){throw e.onFail(n,r,t),t}case"flow_spawn":var s=t.get(n.rootId);return s.async=!0,o(n);case"flow_resume":case"flow_resume_error":var s=t.get(n.rootId);e.onResume(n,s.context);try{return o(n)}finally{e.onSuspend(n,s.context)}case"flow_throw":var s=t.get(n.rootId);return t.delete(n.id),e.onFail(n,s.context,n.args[0]),o(n);case"flow_return":var s=t.get(n.rootId);return t.delete(n.id),e.onSuccess(n,s.context,n.args[0]),o(n)}}}function R(e,t,n,r){if(r instanceof Date)return{$MST_DATE:r.getTime()};if(_e(r))return r;if(le(r))return M("[MSTNode: "+o(r).name+"]");if("function"==typeof r)return M("[function]");if("object"==typeof r&&!we(r)&&!me(r))return M("[object "+(r&&r.constructor&&r.constructor.name||"Complex Object")+"]");try{return JSON.stringify(r),r}catch(e){return M(""+e)}}function z(e,t){return t&&"object"==typeof t&&"$MST_DATE"in t?new Date(t.$MST_DATE):t}function M(e){return{$MST_UNSERIALIZABLE:!0,type:e}}function L(e,t){pt.runInAction(function(){ge(t).forEach(function(t){return F(e,t)})})}function F(e,t){var n=T(e,t.path||"");if(!n)return ye("Invalid action path: "+(t.path||""));var o=pe(n);return"@APPLY_PATCHES"===t.name?i.call(null,n,t.args[0]):"@APPLY_SNAPSHOT"===t.name?d.call(null,n,t.args[0]):("function"!=typeof n[t.name]&&ye("Action '"+t.name+"' does not exist in '"+o.path+"'"),n[t.name].apply(n,t.args?t.args.map(function(e){return z(o,e)}):[]))}function q(e){var t={actions:[],stop:function(){return n()},replay:function(e){L(e,t.actions)}},n=$(e,t.actions.push.bind(t.actions));return t}function $(e,t,n){function o(n){if("action"===n.type&&n.id===n.rootId){var o=pe(n.context);t({name:n.name,path:ce(pe(e),o),args:n.args.map(function(e,t){return R(o,n.name,t,e)})})}}return void 0===n&&(n=!1),J(e,n?function(e,t){var n=t(e);return o(e),n}:function(e,t){return o(e),t(e)})}function U(){return bt++}function H(e,t){var n=pe(e.context),o=n._isRunningAction,r=mt;n.assertAlive(),n._isRunningAction=!0,mt=e;try{return Y(n,e,t)}finally{mt=r,n._isRunningAction=o}}function G(){return mt?mt:ye("Not running an action!")}function W(e,t,n){return function(){var o=U();return H({type:"action",name:t,id:o,args:Ve(arguments),context:e,tree:v(e),rootId:mt?mt.rootId:o,parentId:mt?mt.id:0},n)}}function J(e,t){var n=pe(e);return n.addMiddleWare(t)}function Z(e,t){return t.$mst_middleware?t.$mst_middleware.push(e):t.$mst_middleware=[e],t}function B(e,t,n){for(var o=n.$mst_middleware||Tt,r=e;r;)r.middlewares&&(o=o.concat(r.middlewares)),r=r.parent;return o}function Y(e,t,n){function o(e){var s=r[a++];return s?s(e,o):pt.action(n).apply(null,t.args)}var r=B(e,t,n);if(!r.length)return pt.action(n).apply(null,t.args);var a=0;return o(t)}function K(e){try{return JSON.stringify(e)}catch(e){return"<Unserializable: "+e+">"}}function Q(e){return"function"==typeof e?"<function"+(e.name?" "+e.name:"")+">":le(e)?"<"+e+">":"`"+K(e)+"`"}function X(e){var t=e.value,n=e.context[e.context.length-1].type,o=e.context.map(function(e){var t=e.path;return t}).filter(function(e){return e.length>0}).join("/"),r=o.length>0?'at path "/'+o+'" ':"",a=le(t)?"value of type "+pe(t).type.name+":":_e(t)?"value":"snapshot",s=n&&le(t)&&n.is(pe(t).snapshot);return""+r+a+" "+Q(t)+" is not assignable "+(n?"to type: `"+n.name+"`":"")+(e.message?" ("+e.message+")":"")+(n?Qe(n)?".":", expected an instance of `"+n.name+"` or a snapshot like `"+n.describe()+"` instead."+(s?" (Note that a snapshot of the provided value is compatible with the targeted type)":""):".")}function ee(e,t,n){return e.concat([{path:t,type:n}])}function te(){return Tt}function ne(e,t,n){return[{context:e,value:t,message:n}]}function oe(e){return e.reduce(function(e,t){return e.concat(t)},[])}function re(e,t){}function ae(e,t){var n=e.validate(t,[{path:"",type:e}]);n.length>0&&ye("Error while converting "+Q(t)+" to `"+e.name+"`:\n"+n.map(X).join("\n"))}function se(e,t,n,o,r,a,s){if(void 0===a&&(a=ve),void 0===s&&(s=be),le(r)){var i=r.$treenode;return i.isRoot||ye("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+(t?t.path:"")+"/"+n+"', but it lives already at '"+i.path+"'"),i.setParent(t,n),i}var l=a(r);if(e.shouldAttachNode){var p=new ht(e,t,n,o,r,l,e.shouldAttachNode,s);return p.finalizeCreation(),p}return new ct(e,t,n,o,r,l,e.shouldAttachNode,s)}function ie(e){return e instanceof ct||e instanceof ht}function le(e){return!(!e||!e.$treenode)}function pe(e){return le(e)?e.$treenode:ye("Value "+e+" is no MST Node")}function ue(){return pe(this).snapshot}function ce(e,t){e.root!==t.root&&ye("Cannot calculate relative path: objects '"+e+"' and '"+t+"' are not part of the same object tree");for(var n=Me(e.path),o=Me(t.path),r=0;r<n.length&&n[r]===o[r];r++);return n.slice(r).map(jt).join("/")+ze(o.slice(r))}function de(e,t,n){return void 0===n&&(n=!0),he(e,Me(t),n)}function he(e,t,n){void 0===n&&(n=!0);for(var o=e,r=0;r<t.length;r++){if(""===t[r])o=o.root;else if(".."===t[r])o=o.parent;else{if("."===t[r]||""===t[r])continue;if(o){if(!(o instanceof ht))return ye("Illegal state");o=o.getChildNode(t[r]);continue}}if(!o)return n?ye("Could not resolve '"+t[r]+"' in '"+ze(t.slice(0,r-1))+"', path of the patch does not resolve"):void 0}return o}function fe(e){return xt("process","`process()` has been renamed to `flow()`. "+wt),Oe(e)}function ye(e){throw void 0===e&&(e="Illegal state"),new Error("[mobx-state-tree] "+e)}function ve(e){return e}function be(){}function me(e){return!(!Array.isArray(e)&&!pt.isObservableArray(e))}function ge(e){return e?me(e)?e:[e]:Tt}function je(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var o=0;o<t.length;o++){var r=t[o];for(var a in r)e[a]=r[a]}return e}function we(e){if(null===e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function Te(e){return!(null===e||"object"!=typeof e||e instanceof Date||e instanceof RegExp)}function _e(e){return null===e||void 0===e||("string"==typeof e||"number"==typeof e||"boolean"==typeof e||e instanceof Date)}function xe(e){return"function"!=typeof e}function ke(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Ae(e,t,n){Object.defineProperty(e,t,{enumerable:!0,writable:!1,configurable:!0,value:n})}function Ce(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}function Pe(e,t){return e.push(t),function(){Ce(e,t)}}function Ve(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return t}function Oe(e){return Se(e.name,e)}function Se(t,n){var o=function(){function r(e,n,r){e.$mst_middleware=o.$mst_middleware,H({name:t,type:n,id:a,args:[r],tree:s.tree,context:s.context,parentId:s.id,rootId:s.rootId},e)}var a=U(),s=G(),i=arguments;return new Promise(function(l,p){function u(t){var n;try{r(function(e){n=h.next(e)},"flow_resume",t)}catch(t){return void e(function(){r(function(e){p(t)},"flow_throw",t)})}d(n)}function c(t){var n;try{r(function(e){n=h.throw(e)},"flow_resume_error",t)}catch(t){return void e(function(){r(function(e){p(t)},"flow_throw",t)})}d(n)}function d(t){return t.done?void e(function(){r(function(e){l(e)},"flow_return",t.value)}):(t.value&&"function"==typeof t.value.then||ye("Only promises can be yielded to `async`, got: "+t),t.value.then(u,c))}var h,f=function(){h=n.apply(null,arguments),u(void 0)};f.$mst_middleware=o.$mst_middleware,H({name:t,type:"flow_spawn",id:a,args:Ve(i),tree:s.tree,context:s.context,parentId:s.id,rootId:s.rootId},f)})};return o}function Ne(e){return"oldValue"in e||ye("Patches without `oldValue` field cannot be inversed"),[Ie(e),Ee(e)]}function Ie(e){switch(e.op){case"add":return{op:"add",path:e.path,value:e.value};case"remove":return{op:"remove",path:e.path};case"replace":return{op:"replace",path:e.path,value:e.value}}}function Ee(e){switch(e.op){case"add":return{op:"remove",path:e.path};case"remove":return{op:"add",path:e.path,value:e.oldValue};case"replace":return{op:"replace",path:e.path,value:e.oldValue}}}function De(e){return e.replace(/~/g,"~1").replace(/\//g,"~0")}function Re(e){return e.replace(/~0/g,"/").replace(/~1/g,"~")}function ze(e){return 0===e.length?"":"/"+e.map(De).join("/")}function Me(e){var t=e.split("/").map(Re);return""===t[0]?t.slice(1):t}function Le(){return pe(this)+"("+this.size+" items)"}function Fe(e){e||ye("Map.put cannot be used to set empty values");var t;if(le(e))t=pe(e);else{if(!Te(e))return ye("Map.put can only be used to store complex values");var n=pe(this).type.subType;t=pe(n.create(e))}return t.identifierAttribute||ye("Map.put can only be used to store complex values that have an identifier type attribute"),this.set(t.identifier,t.value),this}function qe(e){return new kt("map<string, "+e.name+">",e)}function $e(){return pe(this)+"("+this.length+" items)"}function Ue(e){return new At(e.name+"[]",e)}function He(e,t,n,o,r){for(var a,s,i=!1,l=void 0,p=0;i=p<=o.length-1,a=n[p],s=i?o[p]:void 0,ie(s)&&(s=s.storedValue),a||i;p++)if(i)if(a)if(We(a,s))n[p]=Ge(t,e,""+r[p],s,a);else{l=void 0;for(var u=p;u<n.length;u++)if(We(n[u],s)){l=n.splice(u,1)[0];break}n.splice(p,0,Ge(t,e,""+r[p],s,l))}else le(s)&&pe(s).parent===e&&ye("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+e.path+"/"+r[p]+"', but it lives already at '"+pe(s).path+"'"),n.splice(p,0,Ge(t,e,""+r[p],s));else a.die(),n.splice(p,1),p--;return n}function Ge(e,t,n,o,r){if(re(e,o),le(o)){var a=pe(o);if(a.assertAlive(),null!==a.parent&&a.parent===t)return a.setParent(t,n),r&&r!==a&&r.die(),a}if(r){var s=e.reconcile(r,o);return s.setParent(t,n),s}var i=e.instantiate(t,n,t._environment,o);return i}function We(e,t){return le(t)?pe(t)===e:!(!Te(t)||e.snapshot!==t)||!!(e instanceof ht&&null!==e.identifier&&e.identifierAttribute&&we(t)&&t[e.identifierAttribute]===e.identifier)}function Je(){return pe(this).toString()}function Ze(e){return Object.keys(e).reduce(function(e,t){if(t in Pt)return ye("Hook '"+t+"' was defined as property. Hooks should be defined as part of the actions");var n=Object.getOwnPropertyDescriptor(e,t);"get"in n&&ye("Getters are not supported as properties. Please use views instead");var o=n.value;if(null===o)ye("The default value of an attribute cannot be null or undefined as the type cannot be inferred. Did you mean `types.maybe(someType)`?");else{if(_e(o))return Object.assign({},e,(r={},r[t]=ot(Ke(o),o),r));if(E(o))return e;ye("function"==typeof o?"Functions are not supported as properties, use views instead":"object"==typeof o?"In property '"+t+"': base model's should not contain complex values: '"+o+"'":"Unexpected value for property '"+t+"'")}var r},e)}function Be(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="string"==typeof e[0]?e.shift():"AnonymousModel",o=e.shift()||{};return new Ot({name:n,properties:o})}function Ye(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="string"==typeof e[0]?e.shift():"AnonymousModel";return e.reduce(function(e,t){return e.cloneAndEnhance({name:e.name+"_"+t.name,properties:t.properties,initializers:t.initializers})}).named(n)}function Ke(e){switch(typeof e){case"string":return Nt;case"number":return It;case"boolean":return Et;case"object":if(e instanceof Date)return zt}return ye("Cannot determine primitive type from value "+e)}function Qe(e){return E(e)&&(e.flags&(lt.String|lt.Number|lt.Boolean|lt.Date))>0}function Xe(e){return new Mt(e)}function et(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="string"==typeof e[0]?e.shift():E(e[0])?e[0].name:null,o=e[0],r=e[1],a=e[2]?e[2]:function(e){return"Value does not respect the refinement predicate"};return new Lt(n,o,r,a)}function tt(e,t){var n="string"==typeof e?t:e,o=nt.apply(void 0,n.map(function(e){return Xe(""+e)}));return"string"==typeof e&&(o.name=e),o}function nt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=E(e)?null:e,r=E(e)?t.concat(e):t,a="("+r.map(function(e){return e.name}).join(" | ")+")";return new Ft(a,r,o)}function ot(e,t){return new qt(e,t)}function rt(e){return nt($t,e)}function at(e,t){var n="string"==typeof e?e:"late("+e.toString()+")",o="string"==typeof e?t:e;return new Ut(n,o)}function st(e,t){return t?new Bt(e,t):new Zt(e)}function it(e){return void 0===e&&(e=Nt),new Yt(e)}Object.defineProperty(t,"__esModule",{value:!0});var lt,pt=n(35),ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},ct=function(){function e(e,t,n,o,r,a,s,i){void 0===i&&(i=be),this.subpath="",this._environment=void 0,this._autoUnbox=!0,this.state=ft.INITIALIZING,this.type=e,this.storedValue=a,this._parent=t,this.subpath=n,this.storedValue=a,this._environment=o,this.unbox=this.unbox.bind(this),s&&ke(this.storedValue,"$treenode",this);var l=!0;try{s&&ke(this.storedValue,"toJSON",ue),i(this,r),this.state=ft.CREATED,l=!1}finally{l&&(this.state=ft.DEAD)}}return Object.defineProperty(e.prototype,"path",{get:function(){return this.parent?this.parent.path+"/"+De(this.subpath):""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return null===this.parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._parent?this._parent.root:ye("This scalar node is not part of a tree")},enumerable:!0,configurable:!0}),e.prototype.setParent=function(e,t){void 0===t&&(t=null),this.parent!==e&&ye("Cannot change parent of immutable node"),this.subpath!==t&&(this.subpath=t||"")},Object.defineProperty(e.prototype,"value",{get:function(){return this.type.getValue(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=this.type.getSnapshot(this);return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAlive",{get:function(){return this.state!==ft.DEAD},enumerable:!0,configurable:!0}),e.prototype.unbox=function(e){return e&&this._autoUnbox===!0?e.value:e},e.prototype.toString=function(){return this.type.name+"@"+(this.path||"<root>")+(this.isAlive?"":"[dead]")},e.prototype.die=function(){this.state=ft.DEAD},I([pt.observable],e.prototype,"subpath",void 0),e}(),dt=1,ht=function(){function e(e,t,n,o,r,a,s,i){void 0===i&&(i=be);var l=this;this.nodeId=++dt,this.subpath="",this._parent=null,this._isRunningAction=!1,this.isProtectionEnabled=!0,this.identifierAttribute=void 0,this._environment=void 0,this._autoUnbox=!0,this.state=ft.INITIALIZING,this.middlewares=Tt,this.type=e,this.storedValue=a,this._parent=t,this.subpath=n,this._environment=o,this.unbox=this.unbox.bind(this),this.preboot(),t||(this.identifierCache=new gt),s&&ke(this.storedValue,"$treenode",this);var p=!0;try{s&&ke(this.storedValue,"toJSON",ue),this._isRunningAction=!0,i(this,r),this._isRunningAction=!1,t?t.root.identifierCache.addNodeToCache(this):this.identifierCache.addNodeToCache(this),this.fireHook("afterCreate"),this.state=ft.CREATED,p=!1}finally{p&&(this.state=ft.DEAD)}var u=pt.reaction(function(){return l.snapshot},function(e){l.emitSnapshot(e)});u.onError(function(e){throw e}),this.addDisposer(u)}return Object.defineProperty(e.prototype,"path",{get:function(){return this.parent?this.parent.path+"/"+De(this.subpath):""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return null===this.parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var e,t=this;e=t.parent;)t=e;return t},enumerable:!0,configurable:!0}),e.prototype.setParent=function(e,t){void 0===t&&(t=null),this.parent===e&&this.subpath===t||(e&&(this._parent&&e!==this._parent&&ye("A node cannot exists twice in the state tree. Failed to add "+this+" to path '"+e.path+"/"+t+"'."),this._parent||e.root!==this||ye("A state tree is not allowed to contain itself. Cannot assign "+this+" to path '"+e.path+"/"+t+"'"),!this._parent&&this.root._environment&&this.root._environment!==e.root._environment&&ye("A state tree cannot be made part of another state tree as long as their environments are different.")),this.parent&&!e?this.die():(this.subpath=t||"",e&&e!==this._parent&&(e.root.identifierCache.mergeCache(this),this._parent=e,this.fireHook("afterAttach"))))},e.prototype.fireHook=function(e){var t=this.storedValue&&"object"==typeof this.storedValue&&this.storedValue[e];"function"==typeof t&&t.apply(this.storedValue)},Object.defineProperty(e.prototype,"value",{get:function(){if(this.isAlive)return this.type.getValue(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapshot",{get:function(){if(this.isAlive){var e=this.type.getSnapshot(this);return e}},enumerable:!0,configurable:!0}),e.prototype.isRunningAction=function(){return!!this._isRunningAction||!this.isRoot&&this.parent.isRunningAction()},Object.defineProperty(e.prototype,"identifier",{get:function(){return this.identifierAttribute?this.storedValue[this.identifierAttribute]:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAlive",{get:function(){return this.state!==ft.DEAD},enumerable:!0,configurable:!0}),e.prototype.assertAlive=function(){this.isAlive||ye(this+" cannot be used anymore as it has died; it has been removed from a state tree. If you want to remove an element from a tree and let it live on, use 'detach' or 'clone' the value")},e.prototype.getChildNode=function(e){this.assertAlive(),this._autoUnbox=!1;var t=this.type.getChildNode(this,e);return this._autoUnbox=!0,t},e.prototype.getChildren=function(){this.assertAlive(),this._autoUnbox=!1;var e=this.type.getChildren(this);return this._autoUnbox=!0,e},e.prototype.getChildType=function(e){return this.type.getChildType(e)},Object.defineProperty(e.prototype,"isProtected",{get:function(){return this.root.isProtectionEnabled},enumerable:!0,configurable:!0}),e.prototype.assertWritable=function(){this.assertAlive(),!this.isRunningAction()&&this.isProtected&&ye("Cannot modify '"+this+"', the object is protected and can only be modified by using an action.")},e.prototype.removeChild=function(e){this.type.removeChild(this,e)},e.prototype.unbox=function(e){return e&&this._autoUnbox===!0?e.value:e},e.prototype.toString=function(){var e=this.identifier?"(id: "+this.identifier+")":"";return this.type.name+"@"+(this.path||"<root>")+e+(this.isAlive?"":"[dead]")},e.prototype.finalizeCreation=function(){if(this.state===ft.CREATED){if(this.parent){if(this.parent.state!==ft.FINALIZED)return;this.fireHook("afterAttach")}this.state=ft.FINALIZED;for(var t=0,n=this.getChildren();t<n.length;t++){var o=n[t];o instanceof e&&o.finalizeCreation()}}},e.prototype.detach=function(){this.isAlive||ye("Error while detaching, node is not alive."),this.isRoot||(this.fireHook("beforeDetach"),this._environment=this.root._environment,this.state=ft.DETACHING,this.identifierCache=this.root.identifierCache.splitCache(this),this.parent.removeChild(this.subpath),this._parent=null,this.subpath="",this.state=ft.FINALIZED)},e.prototype.preboot=function(){var e=this;this.disposers=[],this.middlewares=[],this.snapshotSubscribers=[],this.patchSubscribers=[],this.applyPatches=W(this.storedValue,"@APPLY_PATCHES",function(t){
t.forEach(function(t){var n=Me(t.path),o=he(e,n.slice(0,-1));o.applyPatchLocally(n[n.length-1],t)})}).bind(this.storedValue),this.applySnapshot=W(this.storedValue,"@APPLY_SNAPSHOT",function(t){if(t!==e.snapshot)return e.type.applySnapshot(e,t)}).bind(this.storedValue)},e.prototype.die=function(){this.state!==ft.DETACHING&&le(this.storedValue)&&(O(this.storedValue,function(t){var n=pe(t);n instanceof e&&n.aboutToDie()}),O(this.storedValue,function(t){var n=pe(t);n instanceof e&&n.finalizeDeath()}))},e.prototype.aboutToDie=function(){this.disposers.splice(0).forEach(function(e){return e()}),this.fireHook("beforeDestroy")},e.prototype.finalizeDeath=function(){this.root.identifierCache.notifyDied(this);var e=this,t=this.path;Ae(this,"snapshot",this.snapshot),this.patchSubscribers.splice(0),this.snapshotSubscribers.splice(0),this.patchSubscribers.splice(0),this.state=ft.DEAD,this._parent=null,this.subpath="",Object.defineProperty(this.storedValue,"$mobx",{get:function(){ye("This object has died and is no longer part of a state tree. It cannot be used anymore. The object (of type '"+e.type.name+"') used to live at '"+t+"'. It is possible to access the last snapshot of this object using 'getSnapshot', or to create a fresh copy using 'clone'. If you want to remove an object from the tree without killing it, use 'detach' instead.")}})},e.prototype.onSnapshot=function(e){return Pe(this.snapshotSubscribers,e)},e.prototype.emitSnapshot=function(e){this.snapshotSubscribers.forEach(function(t){return t(e)})},e.prototype.onPatch=function(e){return Pe(this.patchSubscribers,e)},e.prototype.emitPatch=function(e,t){if(this.patchSubscribers.length){var n=je({},e,{path:t.path.substr(this.path.length)+"/"+e.path}),o=Ne(n),r=o[0],a=o[1];this.patchSubscribers.forEach(function(e){return e(r,a)})}this.parent&&this.parent.emitPatch(e,t)},e.prototype.addDisposer=function(e){this.disposers.unshift(e)},e.prototype.addMiddleWare=function(e){return Pe(this.middlewares,e)},e.prototype.applyPatchLocally=function(e,t){this.assertWritable(),this.type.applyPatchLocally(this,e,t)},I([pt.observable],e.prototype,"subpath",void 0),I([pt.observable],e.prototype,"_parent",void 0),I([pt.computed],e.prototype,"path",null),I([pt.computed],e.prototype,"value",null),I([pt.computed],e.prototype,"snapshot",null),e}();!function(e){e[e.String=1]="String",e[e.Number=2]="Number",e[e.Boolean=4]="Boolean",e[e.Date=8]="Date",e[e.Literal=16]="Literal",e[e.Array=32]="Array",e[e.Map=64]="Map",e[e.Object=128]="Object",e[e.Frozen=256]="Frozen",e[e.Optional=512]="Optional",e[e.Reference=1024]="Reference",e[e.Identifier=2048]="Identifier",e[e.Late=4096]="Late",e[e.Refinement=8192]="Refinement",e[e.Union=16384]="Union",e[e.Null=32768]="Null",e[e.Undefined=65536]="Undefined"}(lt||(lt={}));var ft,yt=function(){function e(e){this.isType=!0,this.name=e}return e.prototype.create=function(e,t){return void 0===e&&(e=this.getDefaultSnapshot()),re(this,e),this.instantiate(null,"",t,e).value},e.prototype.isAssignableFrom=function(e){return e===this},e.prototype.validate=function(e,t){return le(e)?o(e)===this||this.isAssignableFrom(o(e))?te():ne(t,e):this.isValidSnapshot(e,t)},e.prototype.is=function(e){return 0===this.validate(e,[{path:"",type:this}]).length},e.prototype.reconcile=function(e,t){if(e.snapshot===t)return e;if(le(t)&&pe(t)===e)return e;if(e.type===this&&Te(t)&&!le(t)&&(!e.identifierAttribute||e.identifier===t[e.identifierAttribute]))return e.applySnapshot(t),e;var n=e.parent,r=e.subpath;if(e.die(),le(t)&&this.isAssignableFrom(o(t))){var a=pe(t);return a.setParent(n,r),a}return this.instantiate(n,r,e._environment,t)},Object.defineProperty(e.prototype,"Type",{get:function(){return ye("Factory.Type should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.Type`")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SnapshotType",{get:function(){return ye("Factory.SnapshotType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.SnapshotType`")},enumerable:!0,configurable:!0}),I([pt.action],e.prototype,"create",null),e}(),vt=function(e){function t(t){return e.call(this,t)||this}return S(t,e),t.prototype.getValue=function(e){return e.storedValue},t.prototype.getSnapshot=function(e){return e.storedValue},t.prototype.getDefaultSnapshot=function(){},t.prototype.applySnapshot=function(e,t){ye("Immutable types do not support applying snapshots")},t.prototype.applyPatchLocally=function(e,t,n){ye("Immutable types do not support applying patches")},t.prototype.getChildren=function(e){return Tt},t.prototype.getChildNode=function(e,t){return ye("No child '"+t+"' available in type: "+this.name)},t.prototype.getChildType=function(e){return ye("No child '"+e+"' available in type: "+this.name)},t.prototype.reconcile=function(e,t){if(e.type===this&&e.storedValue===t)return e;var n=this.instantiate(e.parent,e.subpath,e._environment,t);return e.die(),n},t.prototype.removeChild=function(e,t){return ye("No child '"+t+"' available in type: "+this.name)},t}(yt),bt=1,mt=null,gt=function(){function e(){this.cache=pt.observable.map()}return e.prototype.addNodeToCache=function(e){if(e.identifierAttribute){var t=e.identifier;this.cache.has(t)||this.cache.set(t,pt.observable.shallowArray());var n=this.cache.get(t);n.indexOf(e)!==-1&&ye("Already registered"),n.push(e)}return this},e.prototype.mergeCache=function(e){var t=this;e.identifierCache.cache.values().forEach(function(e){return e.forEach(function(e){t.addNodeToCache(e)})})},e.prototype.notifyDied=function(e){if(e.identifierAttribute){var t=this.cache.get(e.identifier);t&&t.remove(e)}},e.prototype.splitCache=function(t){var n=new e,o=t.path;return this.cache.values().forEach(function(e){for(var t=e.length-1;t>=0;t--)0===e[t].path.indexOf(o)&&(n.addNodeToCache(e[t]),e.splice(t,1))}),n},e.prototype.resolve=function(e,t){var n=this.cache.get(t);if(!n)return null;var o=n.filter(function(t){return e.isAssignableFrom(t.type)});switch(o.length){case 0:return null;case 1:return o[0];default:return ye("Cannot resolve a reference to type '"+e.name+"' with id: '"+t+"' unambigously, there are multiple candidates: "+o.map(function(e){return e.path}).join(", "))}},e}();!function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CREATED=1]="CREATED",e[e.FINALIZED=2]="FINALIZED",e[e.DETACHING=3]="DETACHING",e[e.DEAD=4]="DEAD"}(ft||(ft={}));var jt=function(e){return".."},wt="See https://github.com/mobxjs/mobx-state-tree/issues/399 for more information. Note that the middleware event types starting with `process` now start with `flow`.",Tt=Object.freeze([]),_t=Object.freeze({}),xt=function(){};xt=function(e,t){},xt.ids={};var kt=function(e){function t(t,n){var o=e.call(this,t)||this;return o.shouldAttachNode=!0,o.flags=lt.Map,o.createNewInstance=function(){var e=pt.observable.shallowMap();return ke(e,"put",Fe),ke(e,"toString",Le),e},o.finalizeNewInstance=function(e,t){var n=e.storedValue;pt.extras.interceptReads(n,e.unbox),pt.intercept(n,function(e){return o.willChange(e)}),e.applySnapshot(t),pt.observe(n,o.didChange)},o.subType=n,o}return S(t,e),t.prototype.instantiate=function(e,t,n,o){return se(this,e,t,n,o,this.createNewInstance,this.finalizeNewInstance)},t.prototype.describe=function(){return"Map<string, "+this.subType.describe()+">"},t.prototype.getChildren=function(e){return e.storedValue.values()},t.prototype.getChildNode=function(e,t){var n=e.storedValue.get(t);return n||ye("Not a child "+t),n},t.prototype.willChange=function(e){var t=pe(e.object);switch(t.assertWritable(),e.type){case"update":var n=e.newValue,o=e.object.get(e.name);if(n===o)return null;re(this.subType,n),e.newValue=this.subType.reconcile(t.getChildNode(e.name),e.newValue),this.verifyIdentifier(e.name,e.newValue);break;case"add":re(this.subType,e.newValue),e.newValue=this.subType.instantiate(t,e.name,void 0,e.newValue),this.verifyIdentifier(e.name,e.newValue)}return e},t.prototype.verifyIdentifier=function(e,t){if(t instanceof ht){var n=t.identifier;null!==n&&""+n!=""+e&&ye("A map of objects containing an identifier should always store the object under their own identifier. Trying to store key '"+n+"', but expected: '"+e+"'")}},t.prototype.getValue=function(e){return e.storedValue},t.prototype.getSnapshot=function(e){var t={};return e.getChildren().forEach(function(e){t[e.subpath]=e.snapshot}),t},t.prototype.didChange=function(e){var t=pe(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:De(e.name),value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"add":return void t.emitPatch({op:"add",path:De(e.name),value:e.newValue.snapshot,oldValue:void 0},t);case"delete":var n=e.oldValue.snapshot;return e.oldValue.die(),void t.emitPatch({op:"remove",path:De(e.name),oldValue:n},t)}},t.prototype.applyPatchLocally=function(e,t,n){var o=e.storedValue;switch(n.op){case"add":case"replace":o.set(t,n.value);break;case"remove":o.delete(t)}},t.prototype.applySnapshot=function(e,t){re(this,t);var n=e.storedValue,o={};n.keys().forEach(function(e){o[e]=!1}),Object.keys(t).forEach(function(e){n.set(e,t[e]),o[e]=!0}),Object.keys(o).forEach(function(e){o[e]===!1&&n.delete(e)})},t.prototype.getChildType=function(e){return this.subType},t.prototype.isValidSnapshot=function(e,t){var n=this;return we(e)?oe(Object.keys(e).map(function(o){return n.subType.validate(e[o],ee(t,o,n.subType))})):ne(t,e,"Value is not a plain object")},t.prototype.getDefaultSnapshot=function(){return{}},t.prototype.removeChild=function(e,t){e.storedValue.delete(t)},I([pt.action],t.prototype,"applySnapshot",null),t}(yt),At=function(e){function t(t,n){var o=e.call(this,t)||this;return o.shouldAttachNode=!0,o.flags=lt.Array,o.createNewInstance=function(){var e=pt.observable.shallowArray();return ke(e,"toString",$e),e},o.finalizeNewInstance=function(e,t){var n=e.storedValue;pt.extras.getAdministration(n).dehancer=e.unbox,pt.intercept(n,function(e){return o.willChange(e)}),e.applySnapshot(t),pt.observe(n,o.didChange)},o.subType=n,o}return S(t,e),t.prototype.describe=function(){return this.subType.describe()+"[]"},t.prototype.instantiate=function(e,t,n,o){return se(this,e,t,n,o,this.createNewInstance,this.finalizeNewInstance)},t.prototype.getChildren=function(e){return e.storedValue.peek()},t.prototype.getChildNode=function(e,t){var n=parseInt(t,10);return n<e.storedValue.length?e.storedValue[n]:ye("Not a child: "+t)},t.prototype.willChange=function(e){var t=pe(e.object);t.assertWritable();var n=t.getChildren();switch(e.type){case"update":if(e.newValue===e.object[e.index])return null;e.newValue=He(t,this.subType,[n[e.index]],[e.newValue],[e.index])[0];break;case"splice":var o=e.index,r=e.removedCount,a=e.added;e.added=He(t,this.subType,n.slice(o,o+r),a,a.map(function(e,t){return o+t}));for(var s=o+r;s<n.length;s++)n[s].setParent(t,""+(s+a.length-r))}return e},t.prototype.getValue=function(e){return e.storedValue},t.prototype.getSnapshot=function(e){return e.getChildren().map(function(e){return e.snapshot})},t.prototype.didChange=function(e){var t=pe(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:""+e.index,value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"splice":for(var n=e.removedCount-1;n>=0;n--)t.emitPatch({op:"remove",path:""+(e.index+n),oldValue:e.removed[n].snapshot},t);for(var n=0;n<e.addedCount;n++)t.emitPatch({op:"add",path:""+(e.index+n),value:t.getChildNode(""+(e.index+n)).snapshot,oldValue:void 0},t);return}},t.prototype.applyPatchLocally=function(e,t,n){var o=e.storedValue,r="-"===t?o.length:parseInt(t);switch(n.op){case"replace":o[r]=n.value;break;case"add":o.splice(r,0,n.value);break;case"remove":o.splice(r,1)}},t.prototype.applySnapshot=function(e,t){re(this,t);var n=e.storedValue;n.replace(t)},t.prototype.getChildType=function(e){return this.subType},t.prototype.isValidSnapshot=function(e,t){var n=this;return me(e)?oe(e.map(function(e,o){return n.subType.validate(e,ee(t,""+o,n.subType))})):ne(t,e,"Value is not an array")},t.prototype.getDefaultSnapshot=function(){return[]},t.prototype.removeChild=function(e,t){e.storedValue.splice(parseInt(t,10),1)},I([pt.action],t.prototype,"applySnapshot",null),t}(yt),Ct="preProcessSnapshot",Pt={afterCreate:"afterCreate",afterAttach:"afterAttach",postProcessSnapshot:"postProcessSnapshot",beforeDetach:"beforeDetach",beforeDestroy:"beforeDestroy"},Vt={name:"AnonymousModel",properties:{},initializers:Tt},Ot=function(e){function t(t){var n=e.call(this,t.name||Vt.name)||this;n.flags=lt.Object,n.shouldAttachNode=!0,n.createNewInstance=function(){var e=pt.observable.shallowObject(_t);return ke(e,"toString",Je),e},n.finalizeNewInstance=function(e,t){var o=e.storedValue;n.forAllProps(function(n,r){pt.extendShallowObservable(o,(a={},a[n]=pt.observable.ref(r.instantiate(e,n,e._environment,t[n])),a)),pt.extras.interceptReads(o,n,e.unbox);var a}),n.initializers.reduce(function(e,t){return t(e)},o),pt.intercept(o,function(e){return n.willChange(e)}),pt.observe(o,n.didChange)},n.didChange=function(e){if(n.properties[e.name]){var t=pe(e.object),o=e.oldValue?e.oldValue.snapshot:void 0;t.emitPatch({op:"replace",path:De(e.name),value:e.newValue.snapshot,oldValue:o},t)}};var o=t.name||Vt.name;return/^\w[\w\d_]*$/.test(o)||ye("Typename should be a valid identifier: "+o),Object.assign(n,Vt,t),n.properties=Ze(n.properties),n.propertiesNames=Object.keys(n.properties),Object.freeze(n.properties),n}return S(t,e),t.prototype.cloneAndEnhance=function(e){return new t({name:e.name||this.name,properties:Object.assign({},this.properties,e.properties),initializers:this.initializers.concat(e.initializers||[]),preProcessor:e.preProcessor||this.preProcessor})},t.prototype.actions=function(e){var t=this,n=function(n){return t.instantiateActions(n,e(n)),n};return this.cloneAndEnhance({initializers:[n]})},t.prototype.instantiateActions=function(e,t){we(t)||ye("actions initializer should return a plain object containing actions"),Object.keys(t).forEach(function(n){if(n===Ct)return ye("Cannot define action '"+Ct+"', it should be defined using 'type.preProcessSnapshot(fn)' instead");var o=t[n],r=e[n];if(n in Pt&&r){var a=o;o=n===Pt.postProcessSnapshot?function(e){return a(r(e))}:function(){r.apply(null,arguments),a.apply(null,arguments)}}ke(e,n,W(e,n,o))})},t.prototype.named=function(e){return this.cloneAndEnhance({name:e})},t.prototype.props=function(e){return this.cloneAndEnhance({properties:e})},t.prototype.volatile=function(e){var t=this,n=function(n){return t.instantiateVolatileState(n,e(n)),n};return this.cloneAndEnhance({initializers:[n]})},t.prototype.instantiateVolatileState=function(e,t){we(t)||ye("state initializer should return a plain object containing views"),pt.extendShallowObservable(e,t)},t.prototype.extend=function(e){var t=this,n=function(n){var o=e(n),r=o.actions,a=o.views,s=o.state,i=N(o,["actions","views","state"]);for(var l in i)ye("The `extend` function should return an object with a subset of the fields 'actions', 'views' and 'state'. Found invalid key '"+l+"'");return s&&t.instantiateVolatileState(n,s),a&&t.instantiateViews(n,a),r&&t.instantiateActions(n,r),n};return this.cloneAndEnhance({initializers:[n]})},t.prototype.views=function(e){var t=this,n=function(n){return t.instantiateViews(n,e(n)),n};return this.cloneAndEnhance({initializers:[n]})},t.prototype.instantiateViews=function(e,t){we(t)||ye("views initializer should return a plain object containing views"),Object.keys(t).forEach(function(n){var o=Object.getOwnPropertyDescriptor(t,n),r=o.value;if("get"in o)if(pt.isComputed(e.$mobx.values[n]))e.$mobx.values[n]=pt.computed(o.get,{name:n,setter:o.set,context:e});else{var a={};Object.defineProperty(a,n,{get:o.get,set:o.set,enumerable:!0}),pt.extendShallowObservable(e,a)}else"function"==typeof r?ke(e,n,r):ye("A view member should either be a function or getter based property")})},t.prototype.preProcessSnapshot=function(e){var t=this.preProcessor;return t?this.cloneAndEnhance({preProcessor:function(n){return t(e(n))}}):this.cloneAndEnhance({preProcessor:e})},t.prototype.instantiate=function(e,t,n,o){return se(this,e,t,n,this.applySnapshotPreProcessor(o),this.createNewInstance,this.finalizeNewInstance)},t.prototype.willChange=function(e){var t=pe(e.object);t.assertWritable();var n=this.properties[e.name];return n&&(re(n,e.newValue),e.newValue=n.reconcile(t.getChildNode(e.name),e.newValue)),e},t.prototype.getChildren=function(e){var t=this,n=[];return this.forAllProps(function(o,r){n.push(t.getChildNode(e,o))}),n},t.prototype.getChildNode=function(e,t){if(!(t in this.properties))return ye("Not a value property: "+t);var n=e.storedValue.$mobx.values[t].value;return n?n:ye("Node not available for property "+t)},t.prototype.getValue=function(e){return e.storedValue},t.prototype.getSnapshot=function(e){var t=this,n={};return this.forAllProps(function(o,r){pt.extras.getAtom(e.storedValue,o).reportObserved(),n[o]=t.getChildNode(e,o).snapshot}),"function"==typeof e.storedValue.postProcessSnapshot?e.storedValue.postProcessSnapshot.call(null,n):n},t.prototype.applyPatchLocally=function(e,t,n){"replace"!==n.op&&"add"!==n.op&&ye("object does not support operation "+n.op),e.storedValue[t]=n.value},t.prototype.applySnapshot=function(e,t){var n=this.applySnapshotPreProcessor(t);re(this,n),this.forAllProps(function(t,o){e.storedValue[t]=n[t]})},t.prototype.applySnapshotPreProcessor=function(e){return this.preProcessor?this.preProcessor.call(null,e):e},t.prototype.getChildType=function(e){return this.properties[e]},t.prototype.isValidSnapshot=function(e,t){var n=this,o=this.applySnapshotPreProcessor(e);return we(o)?oe(this.propertiesNames.map(function(e){return n.properties[e].validate(o[e],ee(t,e,n.properties[e]))})):ne(t,o,"Value is not a plain object")},t.prototype.forAllProps=function(e){var t=this;this.propertiesNames.forEach(function(n){return e(n,t.properties[n])})},t.prototype.describe=function(){var e=this;return"{ "+this.propertiesNames.map(function(t){return t+": "+e.properties[t].describe()}).join("; ")+" }"},t.prototype.getDefaultSnapshot=function(){return{}},t.prototype.removeChild=function(e,t){e.storedValue[t]=null},I([pt.action],t.prototype,"applySnapshot",null),t}(yt),St=function(e){function t(t,n,o,r){void 0===r&&(r=ve);var a=e.call(this,t)||this;return a.shouldAttachNode=!1,a.flags=n,a.checker=o,a.initializer=r,a}return S(t,e),t.prototype.describe=function(){return this.name},t.prototype.instantiate=function(e,t,n,o){return se(this,e,t,n,o,this.initializer)},t.prototype.isValidSnapshot=function(e,t){if(_e(e)&&this.checker(e))return te();var n="Date"===this.name?"Date or a unix milliseconds timestamp":this.name;return ne(t,e,"Value is not a "+n)},t}(vt),Nt=new St("string",lt.String,function(e){return"string"==typeof e}),It=new St("number",lt.Number,function(e){return"number"==typeof e}),Et=new St("boolean",lt.Boolean,function(e){return"boolean"==typeof e}),Dt=new St("null",lt.Null,function(e){return null===e}),Rt=new St("undefined",lt.Undefined,function(e){return void 0===e}),zt=new St("Date",lt.Date,function(e){return"number"==typeof e||e instanceof Date},function(e){return e instanceof Date?e:new Date(e)});zt.getSnapshot=function(e){return e.storedValue.getTime()};var Mt=function(e){function t(t){var n=e.call(this,JSON.stringify(t))||this;return n.shouldAttachNode=!1,n.flags=lt.Literal,n.value=t,n}return S(t,e),t.prototype.instantiate=function(e,t,n,o){return se(this,e,t,n,o)},t.prototype.describe=function(){return JSON.stringify(this.value)},t.prototype.isValidSnapshot=function(e,t){return _e(e)&&e===this.value?te():ne(t,e,"Value is not a literal "+JSON.stringify(this.value))},t}(vt),Lt=function(e){function t(t,n,o,r){var a=e.call(this,t)||this;return a.type=n,a.predicate=o,a.message=r,a}return S(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){return this.type.flags|lt.Refinement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAttachNode",{get:function(){return this.type.shouldAttachNode},enumerable:!0,configurable:!0}),t.prototype.describe=function(){return this.name},t.prototype.instantiate=function(e,t,n,o){var r=this.type.instantiate(e,t,n,o);return r},t.prototype.isAssignableFrom=function(e){return this.type.isAssignableFrom(e)},t.prototype.isValidSnapshot=function(e,t){var n=this.type.validate(e,t);if(n.length>0)return n;var o=le(e)?pe(e).snapshot:e;return this.predicate(o)?te():ne(t,e,this.message(e))},t}(vt),Ft=function(e){function t(t,n,o){var r=e.call(this,t)||this;return r.dispatcher=null,r.dispatcher=o,r.types=n,r}return S(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){var e=lt.Union;return this.types.forEach(function(t){e|=t.flags}),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAttachNode",{get:function(){return this.types.some(function(e){return e.shouldAttachNode})},enumerable:!0,configurable:!0}),t.prototype.isAssignableFrom=function(e){return this.types.some(function(t){return t.isAssignableFrom(e)})},t.prototype.describe=function(){return"("+this.types.map(function(e){return e.describe()}).join(" | ")+")"},t.prototype.instantiate=function(e,t,n,o){return this.determineType(o).instantiate(e,t,n,o)},t.prototype.reconcile=function(e,t){return this.determineType(t).reconcile(e,t)},t.prototype.determineType=function(e){if(null!==this.dispatcher)return this.dispatcher(e);var t=this.types.filter(function(t){return t.is(e)});return t.length>1?ye("Ambiguos snapshot "+JSON.stringify(e)+" for union "+this.name+". Please provide a dispatch in the union declaration."):t[0]},t.prototype.isValidSnapshot=function(e,t){if(null!==this.dispatcher)return this.dispatcher(e).validate(e,t);var n=this.types.map(function(n){return n.validate(e,t)}),o=n.filter(function(e){return 0===e.length});return o.length>1?ne(t,e,"Multiple types are applicable for the union (hint: provide a dispatch function)"):0===o.length?ne(t,e,"No type is applicable for the union").concat(oe(n)):te()},t}(vt),qt=function(e){function t(t,n){var o=e.call(this,t.name)||this;return o.type=t,o.defaultValue=n,o}return S(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){return this.type.flags|lt.Optional},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAttachNode",{get:function(){return this.type.shouldAttachNode},enumerable:!0,configurable:!0}),t.prototype.describe=function(){return this.type.describe()+"?"},t.prototype.instantiate=function(e,t,n,o){if("undefined"==typeof o){var r=this.getDefaultValue(),a=le(r)?pe(r).snapshot:r;return this.type.instantiate(e,t,n,a)}return this.type.instantiate(e,t,n,o)},t.prototype.reconcile=function(e,t){return this.type.reconcile(e,this.type.is(t)?t:this.getDefaultValue())},t.prototype.getDefaultValue=function(){var e="function"==typeof this.defaultValue?this.defaultValue():this.defaultValue;return"function"==typeof this.defaultValue&&re(this,e),e},t.prototype.isValidSnapshot=function(e,t){return void 0===e?te():this.type.validate(e,t)},t.prototype.isAssignableFrom=function(e){return this.type.isAssignableFrom(e)},t}(vt),$t=ot(Dt,null),Ut=function(e){function t(t,n){var o=e.call(this,t)||this;return o._subType=null,o.definition=n,o}return S(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){return this.subType.flags|lt.Late},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAttachNode",{get:function(){return this.subType.shouldAttachNode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subType",{get:function(){return null===this._subType&&(this._subType=this.definition()),this._subType},enumerable:!0,configurable:!0}),t.prototype.instantiate=function(e,t,n,o){return this.subType.instantiate(e,t,n,o)},t.prototype.reconcile=function(e,t){return this.subType.reconcile(e,t)},t.prototype.describe=function(){return this.subType.name},t.prototype.isValidSnapshot=function(e,t){return this.subType.validate(e,t)},t.prototype.isAssignableFrom=function(e){return this.subType.isAssignableFrom(e)},t}(vt),Ht=function(e){function t(){var t=e.call(this,"frozen")||this;return t.shouldAttachNode=!1,t.flags=lt.Frozen,t}return S(t,e),t.prototype.describe=function(){return"<any immutable value>"},t.prototype.instantiate=function(e,t,n,o){var r=o;return se(this,e,t,n,r)},t.prototype.isValidSnapshot=function(e,t){return xe(e)?te():ne(t,e,"Value is not serializable and cannot be frozen")},t}(vt),Gt=new Ht,Wt=function(){function e(e,t){if(this.mode=e,this.value=t,"object"===e){if(!le(t))return ye("Can only store references to tree nodes, got: '"+t+"'");var n=pe(t);if(!n.identifierAttribute)return ye("Can only store references with a defined identifier attribute.")}}return e}(),Jt=function(e){function t(t){var n=e.call(this,"reference("+t.name+")")||this;return n.targetType=t,n.flags=lt.Reference,n}return S(t,e),t.prototype.describe=function(){return this.name},t.prototype.isAssignableFrom=function(e){return this.targetType.isAssignableFrom(e)},t.prototype.isValidSnapshot=function(e,t){return"string"==typeof e||"number"==typeof e?te():ne(t,e,"Value is not a valid identifier, which is a string or a number")},t}(vt),Zt=function(e){function t(t){var n=e.call(this,t)||this;return n.shouldAttachNode=!0,n}return S(t,e),t.prototype.getValue=function(e){if(e.isAlive){var t=e.storedValue;if("object"===t.mode)return t.value;var n=e.root.identifierCache.resolve(this.targetType,t.value);return n?n.value:ye("Failed to resolve reference of type "+this.targetType.name+": '"+t.value+"' (in: "+e.path+")")}},t.prototype.getSnapshot=function(e){var t=e.storedValue;switch(t.mode){case"identifier":return t.value;case"object":return pe(t.value).identifier}},t.prototype.instantiate=function(e,t,n,o){return se(this,e,t,n,new Wt(le(o)?"object":"identifier",o))},t.prototype.reconcile=function(e,t){if(e.type===this){var n=le(t)?"object":"identifier",o=e.storedValue;if(n===o.mode&&o.value===t)return e}var r=this.instantiate(e.parent,e.subpath,e._environment,t);return e.die(),r},t}(Jt),Bt=function(e){function t(t,n){var o=e.call(this,t)||this;return o.options=n,o.shouldAttachNode=!1,o}return S(t,e),t.prototype.getValue=function(e){if(e.isAlive)return this.options.get(e.storedValue,e.parent?e.parent.storedValue:null)},t.prototype.getSnapshot=function(e){return e.storedValue},t.prototype.instantiate=function(e,t,n,o){var r=le(o)?this.options.set(o,e?e.storedValue:null):o;return se(this,e,t,n,r)},t.prototype.reconcile=function(e,t){var n=le(t)?this.options.set(t,e?e.storedValue:null):t;if(e.type===this&&e.storedValue===n)return e;var o=this.instantiate(e.parent,e.subpath,e._environment,n);return e.die(),o},t}(Jt),Yt=function(e){function t(t){var n=e.call(this,"identifier("+t.name+")")||this;return n.identifierType=t,n.shouldAttachNode=!1,n.flags=lt.Identifier,n}return S(t,e),t.prototype.instantiate=function(e,t,n,o){return e&&le(e.storedValue)?(e.identifierAttribute&&ye("Cannot define property '"+t+"' as object identifier, property '"+e.identifierAttribute+"' is already defined as identifier property"),e.identifierAttribute=t,se(this,e,t,n,o)):ye("Identifier types can only be instantiated as direct child of a model type")},t.prototype.reconcile=function(e,t){return e.storedValue!==t?ye("Tried to change identifier from '"+e.storedValue+"' to '"+t+"'. Changing identifiers is not allowed."):e},t.prototype.describe=function(){return"identifier("+this.identifierType.describe()+")"},t.prototype.isValidSnapshot=function(e,t){return void 0===e||null===e||"string"==typeof e||"number"==typeof e?this.identifierType.validate(e,t):ne(t,e,"Value is not a valid identifier, which is a string or a number")},t}(vt),Kt={enumeration:tt,model:Be,compose:Ye,reference:st,union:nt,optional:ot,literal:Xe,maybe:rt,refinement:et,string:Nt,boolean:Et,number:It,Date:zt,map:qe,array:Ue,frozen:Gt,identifier:it,late:at,undefined:Rt,null:Dt};t.types=Kt,t.typecheck=ae,t.escapeJsonPath=De,t.unescapeJsonPath=Re,t.decorate=Z,t.addMiddleware=J,t.process=fe,t.isStateTreeNode=le,t.flow=Oe,t.applyAction=L,t.onAction=$,t.recordActions=q,t.createActionTrackingMiddleware=D,t.getType=o,t.getChildType=r,t.onPatch=a,t.onSnapshot=s,t.applyPatch=i,t.recordPatches=l,t.protect=p,t.unprotect=u,t.isProtected=c,t.applySnapshot=d,t.getSnapshot=h,t.hasParent=f,t.getParent=y,t.getRoot=v,t.getPath=b,t.getPathParts=m,t.isRoot=g,t.resolvePath=j,t.resolveIdentifier=w,t.tryResolve=T,t.getRelativePath=_,t.clone=x,t.detach=k,t.destroy=A,t.isAlive=C,t.addDisposer=P,t.getEnv=V,t.walk=O}).call(t,n(556).setImmediate)},1201:function(e,t,n){e.exports={content:'<p>以一个简单的 TodoList 应用为例，分别使用 <a href="https://github.com/mobxjs/mobx-state-tree">Mobx State Tree</a> 和 React Mobx VM 来实现一下，这样对比起来更明显</p>\n<div class="picidae-toc">\n<ul>\n<li>\n<a href="#mst-todolist">MST TodoList</a>\n</li>\n<li>\n<a href="#vm-todolist">VM TodoList</a>\n</li>\n</ul>\n</div>\n<hr>\n<h2 id="mst-todolist"><a href="#mst-todolist" aria-hidden="true"><span class="icon icon-link"></span></a>MST TodoList</h2>\n<p>如需实现如下一个简单的 TodoList 应用，使用 MST（Mobx State Tree）应该如何书写呢？</p>\n<ul>\n<li>index.js</li>\n</ul>\n<div class="transformer-react-render-container"><transformer-react-render data-id="0"></transformer-react-render><pre><code class="hljs language-jsx" data-query="{&#x22;editable&#x22;:true,&#x22;placement&#x22;:&#x22;top&#x22;}" data-lang="jsx"><span class="hljs-keyword">import</span> { observable, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">\'mobx\'</span>\n<span class="hljs-keyword">import</span> { observer } <span class="hljs-keyword">from</span> <span class="hljs-string">\'mobx-react\'</span>\n<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">\'react\'</span>\n<span class="hljs-keyword">import</span> { render } <span class="hljs-keyword">from</span> <span class="hljs-string">\'react-dom\'</span>\n\n<span class="hljs-keyword">import</span> { TodoStore } <span class="hljs-keyword">from</span> <span class="hljs-string">\'../snippets/mst/models/TodoStore\'</span>\n<span class="hljs-keyword">import</span> { TodoList } <span class="hljs-keyword">from</span> <span class="hljs-string">\'../snippets/mst/components/TodoList\'</span>\n<span class="hljs-comment">// 注意：该以下代码可同步编辑</span>\n<span class="hljs-keyword">const</span> store = TodoStore.create({\n  <span class="hljs-attr">todos</span>: [\n    {\n      <span class="hljs-attr">title</span>: <span class="hljs-string">\'Get Coffee\'</span>\n    },\n    {\n      <span class="hljs-attr">title</span>: <span class="hljs-string">\'Write simpler code\'</span>\n    }\n  ]\n})\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#x3C;TodoList todoStore={store}/></code></pre></div>\n<pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">import</span> { types } <span class="hljs-keyword">from</span> <span class="hljs-string">\'mobx-state-tree\'</span>\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Todo = types\n  .model(<span class="hljs-string">\'Todo\'</span>, {\n    <span class="hljs-attr">id</span>: types.optional(types.number, () => <span class="hljs-built_in">Math</span>.random()),\n    <span class="hljs-attr">title</span>: types.string,\n    <span class="hljs-attr">finished</span>: <span class="hljs-literal">false</span>\n  })\n  .actions(<span class="hljs-function"><span class="hljs-params">self</span> =></span> (\n    {\n      toggle() {\n        self.finished = !self.finished\n      }\n    }\n  ))\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> TodoStore = types\n  .model(<span class="hljs-string">\'TodoStore\'</span>, {\n    <span class="hljs-attr">todos</span>: types.array(Todo)\n  })\n  .views(<span class="hljs-function"><span class="hljs-params">self</span> =></span> (\n    {\n      get unfinishedTodoCount() {\n        <span class="hljs-keyword">return</span> self.todos.filter(<span class="hljs-function"><span class="hljs-params">todo</span> =></span> !todo.finished).length\n      }\n    }\n  ))\n  .actions(<span class="hljs-function"><span class="hljs-params">self</span> =></span> (\n    {\n      addTodo(title) {\n        self.todos.push({ title })\n      }\n    }\n  ))</code></pre>\n<ul>\n<li>../snippets/mst/components/TodoList.js</li>\n</ul>\n<pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">import</span> { observable } <span class="hljs-keyword">from</span> <span class="hljs-string">\'mobx\'</span>\n<span class="hljs-keyword">import</span> { observer } <span class="hljs-keyword">from</span> <span class="hljs-string">\'mobx-react\'</span>\n<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">\'react\'</span>\n\n<span class="hljs-keyword">import</span> { Todo } <span class="hljs-keyword">from</span> <span class="hljs-string">\'./Todo\'</span>\n\n@observer\n<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoList</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{\n  @observable newTodoTitle = <span class="hljs-string">\'\'</span>\n\n  render() {\n    <span class="hljs-keyword">const</span> { todoStore } = <span class="hljs-keyword">this</span>.props\n    <span class="hljs-keyword">return</span> (\n      <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>\n        </span>&#x3C;input value={this.newTodoTitle} onChange={this.handleChange}/>\n        &#x3C;button onClick={this.handleNewTodoClick}>Add&#x3C;/button>\n        &#x3C;ul>\n          {todoStore.todos.map(todo => &#x3C;Todo todo={todo} key={todo.id}/>)}\n        &#x3C;/ul>\n        Tasks left: {todoStore.unfinishedTodoCount}\n      &#x3C;/div>\n    )\n  }\n\n  handleChange = (e) => {\n    this.newTodoTitle = e.target.value\n  }\n\n  handleNewTodoClick = (e) => {\n    e.stopPropagation()\n    this.props.todoStore.addTodo(this.newTodoTitle)\n    this.newTodoTitle = \'\'\n  }\n}</code></pre>\n<ul>\n<li>../snippets/mst/components/Todo.js</li>\n</ul>\n<pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">import</span> { observer } <span class="hljs-keyword">from</span> <span class="hljs-string">\'mobx-react\'</span>;\n<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">\'react\'</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Todo = observer(<span class="hljs-function">(<span class="hljs-params">{ todo }</span>) =></span>\n  &#x3C;li>\n    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">input</span>\n      <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span>\n      <span class="hljs-attr">checked</span>=<span class="hljs-string">{todo.finished}</span>\n      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{todo.toggle}</span>\n    /></span>\n    {todo.title}\n  <span class="hljs-tag">&#x3C;/<span class="hljs-name">li</span>></span></span>,\n);</code></pre>\n<h2 id="vm-todolist"><a href="#vm-todolist" aria-hidden="true"><span class="icon icon-link"></span></a>VM TodoList</h2>\n<ul>\n<li>index.js</li>\n</ul>\n<div class="transformer-react-render-container"><transformer-react-render data-id="1"></transformer-react-render><pre><code class="hljs language-jsx" data-query="{&#x22;editable&#x22;:true,&#x22;placement&#x22;:&#x22;top&#x22;}" data-lang="jsx"><span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">\'react-dom\'</span>\n<span class="hljs-keyword">import</span> { h } <span class="hljs-keyword">from</span> <span class="hljs-string">\'react-mobx-vm\'</span>\n\n<span class="hljs-keyword">import</span> TodoList <span class="hljs-keyword">from</span> <span class="hljs-string">\'../snippets/vm/TodoList\'</span>\n<span class="hljs-keyword">import</span> Todo <span class="hljs-keyword">from</span> <span class="hljs-string">\'../snippets/vm/Todo\'</span>\n<span class="hljs-comment">// 注意：该以下代码可同步编辑</span>\n<span class="hljs-keyword">const</span> App = TodoList.create({\n  <span class="hljs-attr">todos</span>: [\n    Todo.create({\n      <span class="hljs-attr">title</span>: <span class="hljs-string">\'Get Coffee\'</span>\n    }),\n    Todo.create({\n      <span class="hljs-attr">title</span>: <span class="hljs-string">\'Write simpler code\'</span>\n    })\n  ]\n})\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> h(App)</code></pre></div>\n<ul>\n<li>../snippets/vm/TodoList/index.js</li>\n</ul>\n<pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">import</span> {\n  Root,\n  bindView,\n  observable,\n  computed,\n  action\n} <span class="hljs-keyword">from</span> <span class="hljs-string">\'react-mobx-vm\'</span>\n<span class="hljs-keyword">import</span> View <span class="hljs-keyword">from</span> <span class="hljs-string">\'./View\'</span>\n\n<span class="hljs-keyword">import</span> Todo <span class="hljs-keyword">from</span> <span class="hljs-string">\'../Todo\'</span>\n\n@bindView(View)\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoList</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Root</span> </span>{\n  @observable todos = []\n  @observable newTodoTitle = <span class="hljs-string">\'\'</span>\n  @computed get unfinishedTodoCount() {\n    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.todos.filter(<span class="hljs-function"><span class="hljs-params">todo</span> =></span> !todo.finished).length\n  }\n  @action addTodo() {\n    <span class="hljs-keyword">this</span>.todos.push(Todo.create({ <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.newTodoTitle }))\n  }\n}</code></pre>\n<ul>\n<li>../snippets/vm/TodoList/View.js</li>\n</ul>\n<pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">import</span> { h, binding } <span class="hljs-keyword">from</span> <span class="hljs-string">\'react-mobx-vm\'</span>\n<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">\'react\'</span>\n\n@binding\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoList</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{\n\n  render() {\n    <span class="hljs-keyword">const</span> todoStore = <span class="hljs-keyword">this</span>.local\n    <span class="hljs-keyword">return</span> (\n      <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>\n        </span>&#x3C;input data-bind="newTodoTitle" />\n        &#x3C;button onClick={this.handleNewTodoClick}>Add&#x3C;/button>\n        &#x3C;ul>\n          {todoStore.todos.map(todo => h(todo, { key: todo.id }))}\n        &#x3C;/ul>\n        Tasks left: {todoStore.unfinishedTodoCount}\n      &#x3C;/div><span class="xml">\n    )\n  }\n\n  handleNewTodoClick = (e) => {\n    e.stopPropagation()\n    this.local.addTodo(this.newTodoTitle)\n    this.local.newTodoTitle = \'\'\n  }\n}</span></code></pre>\n<ul>\n<li>../snippets/vm/Todo/index.js</li>\n</ul>\n<pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">import</span> { Root, bindView, observable, action } <span class="hljs-keyword">from</span> <span class="hljs-string">\'react-mobx-vm\'</span>\n<span class="hljs-keyword">import</span> View <span class="hljs-keyword">from</span> <span class="hljs-string">\'./View\'</span>\n\n@bindView(View)\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Todo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Root</span> </span>{\n  @observable id = <span class="hljs-built_in">Math</span>.random()\n  @observable title = <span class="hljs-string">\'\'</span>\n  @observable finished = <span class="hljs-literal">false</span>\n  @action toggle() {\n    <span class="hljs-keyword">this</span>.finished = !<span class="hljs-keyword">this</span>.finished\n  }\n}</code></pre>\n<ul>\n<li>../snippets/vm/Todo/View.js</li>\n</ul>\n<pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript"><span class="hljs-keyword">import</span> {\n  stateless\n} <span class="hljs-keyword">from</span> <span class="hljs-string">\'react-mobx-vm\'</span>\n<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">\'react\'</span>\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> stateless(<span class="hljs-function"><span class="hljs-params">local</span> =></span>\n  &#x3C;li>\n    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">input</span>\n      <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span>\n      <span class="hljs-attr">checked</span>=<span class="hljs-string">{local.finished}</span>\n      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{local.toggle.bind(local)}</span>\n    /></span>\n    {local.title}\n  <span class="hljs-tag">&#x3C;/<span class="hljs-name">li</span>></span></span>\n)</code></pre>\n',
extra:{},"transformer-react-render":{list:[['function anonymous(React,Component,ReactDOM,require\n/*``*/) {\n\nvar exports = {}, module = {};\nmodule.exports = exports;\n(function picidaeTransformerReactRender(){Object.defineProperty(exports,"__esModule",{value:true});var _mobx=require("mobx");var _mobxReact=require("mobx-react");var _react=require("react");var React=_interopRequireWildcard(_react);var _reactDom=require("react-dom");var _TodoStore=require("../snippets/mst/models/TodoStore");var _TodoList=require("../snippets/mst/components/TodoList");function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}// 注意：该以下代码可同步编辑\nvar store=_TodoStore.TodoStore.create({todos:[{title:"Get Coffee"},{title:"Write simpler code"}]});exports.default=React.createElement(_TodoList.TodoList,{todoStore:store})})(exports, module)\nreturn module.exports.default || module.exports;\n}',{editable:!0,placement:"top"},7],['function anonymous(React,Component,ReactDOM,require\n/*``*/) {\n\nvar exports = {}, module = {};\nmodule.exports = exports;\n(function picidaeTransformerReactRender(){Object.defineProperty(exports,"__esModule",{value:true});var _reactDom=require("react-dom");var _reactDom2=_interopRequireDefault(_reactDom);var _reactMobxVm=require("react-mobx-vm");var _TodoList=require("../snippets/vm/TodoList");var _TodoList2=_interopRequireDefault(_TodoList);var _Todo=require("../snippets/vm/Todo");var _Todo2=_interopRequireDefault(_Todo);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}// 注意：该以下代码可同步编辑\nvar App=_TodoList2.default.create({todos:[_Todo2.default.create({title:"Get Coffee"}),_Todo2.default.create({title:"Write simpler code"})]});exports.default=(0,_reactMobxVm.h)(App)})(exports, module)\nreturn module.exports.default || module.exports;\n}',{editable:!0,placement:"top"},5]],pkg:{react:n(5),"react-dom":n(144),mobx:n(35),"mobx-react":n(117),"../snippets/mst/models/TodoStore":n(462),"../snippets/mst/components/TodoList":n(461),"react-mobx-vm":n(62),"../snippets/vm/TodoList":n(465),"../snippets/vm/Todo":n(300)}}}},1305:function(e,t,n){(function(e,t){!function(e,n){"use strict";function o(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return y[f]=o,h(f),f++}function r(e){delete y[e]}function a(e){var t=e.callback,o=e.args;switch(o.length){case 0:t();break;case 1:t(o[0]);break;case 2:t(o[0],o[1]);break;case 3:t(o[0],o[1],o[2]);break;default:t.apply(n,o)}}function s(e){if(v)setTimeout(s,0,e);else{var t=y[e];if(t){v=!0;try{a(t)}finally{r(e),v=!1}}}}function i(){h=function(e){t.nextTick(function(){s(e)})}}function l(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function p(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&s(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),h=function(n){e.postMessage(t+n,"*")}}function u(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;s(t)},h=function(t){e.port2.postMessage(t)}}function c(){var e=b.documentElement;h=function(t){var n=b.createElement("script");n.onreadystatechange=function(){s(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function d(){h=function(e){setTimeout(s,0,e)}}if(!e.setImmediate){var h,f=1,y={},v=!1,b=e.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,"[object process]"==={}.toString.call(e.process)?i():l()?p():e.MessageChannel?u():b&&"onreadystatechange"in b.createElement("script")?c():d(),m.setImmediate=o,m.clearImmediate=r}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(143))}});